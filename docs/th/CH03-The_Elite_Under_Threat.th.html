<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ch03-the_elite_under_threat.th – The Dictionary Maker</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-c1fac2584b48ed01fb6e278e36375074.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="fullcontent quarto-light">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="sec-elite-threat" class="level1">
<h1>The Elite Under Threat</h1>
<section id="western-educated-intellectuals-in-a-changing-world" class="level2">
<h2 class="anchored" data-anchor-id="western-educated-intellectuals-in-a-changing-world">Western-Educated Intellectuals in a Changing World</h2>
<p>The Western-educated middle and upper classes of Siam found themselves caught between loyalty to the old order and the promise of democratic reform.</p>
<p>While the broader transformation of Siamese society (described in <strong>?@sec-siam-transition</strong>) created pressures that would eventually explode into political revolution, its most immediate and tragic victims would be the very people who had done the most to modernize the kingdom. The Western-educated elite—men like So Sethaputra whose story we encountered in <strong>?@sec-last-siamese</strong>—represented both the greatest achievement of the old system and its most vulnerable element when the new order finally emerged.</p>
<p>This was a generation caught in a historical trap of their own making. Their education and expertise had made them indispensable to the modernizing monarchy, but their cosmopolitan outlook and commitment to gradual reform would make them enemies of the revolutionary regime that replaced it. They had served as bridges between traditional Siam and the modern world, only to find themselves stranded when the bridge collapsed beneath them.</p>
</section>
<section id="the-architecture-of-elite-society" class="level2">
<h2 class="anchored" data-anchor-id="the-architecture-of-elite-society">The Architecture of Elite Society</h2>
<p>The Western-educated elite of early twentieth-century Siam represented a remarkable social experiment. Unlike the traditional nobility, whose authority derived from birth and royal favor, this new class had earned their positions through merit, education, and service to the crown. They were the products of King Chulalongkorn’s ambitious program to create a modern administrative class that could compete with European colonial governments while remaining loyal to Siamese traditions.</p>
<p>The system had worked brilliantly for several decades. Young men from good families were selected for government scholarships to study in Europe, where they absorbed Western knowledge while maintaining their cultural identity as Siamese subjects. They returned home to take positions in the expanding bureaucracy, bringing technical expertise and international perspective to the task of modernizing the kingdom. Their success had validated the monarchy’s strategy of controlled modernization—change that would strengthen rather than threaten traditional authority.</p>
<p>By the 1920s, this elite had created a distinctive culture that blended Eastern and Western elements with remarkable sophistication. They lived in Bangkok neighborhoods where traditional wooden houses had been renovated with modern conveniences, where English libraries sat alongside Buddhist shrines, where European furniture was arranged around traditional Thai art. Their children attended schools that taught both Thai classical literature and Western science, that emphasized Buddhist ethics alongside European philosophy.</p>
<p>Their social world revolved around institutions that had no equivalent in traditional Siam: professional associations, literary societies, alumni organizations, and charitable foundations. These groups provided forums for intellectual discussion and cultural exchange that enriched the kingdom’s cultural life while creating networks of shared interest and mutual obligation. The Royal Bangkok Sports Club, the Siam Society, and similar organizations became centers of an emerging civil society that seemed to promise gradual evolution toward constitutional democracy.</p>
<p>The elite’s lifestyle reflected their unique position between worlds. They might begin their day reading English newspapers over European-style breakfast, spend their morning in government offices conducting business in Thai, attend afternoon meetings where they discussed Western political theory, and end their evening at traditional cultural performances. Their wardrobes included both Western suits for official functions and traditional Thai clothing for court ceremonies. Their libraries contained works by Shakespeare and Dickens alongside classical Thai poetry and Buddhist texts.</p>
</section>
<section id="professional-networks-and-intellectual-communities" class="level2">
<h2 class="anchored" data-anchor-id="professional-networks-and-intellectual-communities">Professional Networks and Intellectual Communities</h2>
<p>The Western-educated elite had created an intellectual ecosystem that was unprecedented in Siamese history. Professional journals published articles on engineering, medicine, law, and education that reflected international standards while addressing uniquely Thai concerns. Literary magazines featured poetry and essays that experimented with Western forms while drawing on Thai cultural themes. Newspapers provided sophisticated coverage of both domestic politics and international affairs, creating an informed public discourse that had been impossible under the old system of absolute monarchy.</p>
<p>These publications were more than mere vehicles for information; they were instruments of cultural creation. Through their pages, the Western-educated elite were literally inventing modern Thai identity—finding ways to be simultaneously Thai and modern, Buddhist and scientific, loyal to the monarchy and committed to democratic principles. Their success in this cultural synthesis was evident in the quality of their work: Thai literature and journalism of the 1920s achieved standards that would not be surpassed for decades.</p>
<p>The intellectual networks they created extended beyond national boundaries. Many maintained correspondence with classmates and colleagues in Europe, America, and other Asian countries. They attended international conferences, contributed to foreign publications, and participated in global conversations about modernization, nationalism, and political development. This cosmopolitan outlook was both their greatest strength and their greatest vulnerability: it gave them international perspective and credibility, but it also made them suspect to more parochial political movements.</p>
<p>Their children represented the ultimate test of their cultural synthesis. The second generation of Western-educated families were even more comfortable moving between Thai and international contexts, even more skilled at combining traditional values with modern knowledge. Many spoke three or four languages fluently, felt equally at home in Bangkok and London, and seemed to represent the future of a Thailand that would be both authentically Asian and fully modern.</p>
</section>
<section id="the-economic-foundation-of-elite-status" class="level2">
<h2 class="anchored" data-anchor-id="the-economic-foundation-of-elite-status">The Economic Foundation of Elite Status</h2>
<p>The Western-educated elite’s position in society was secured not only by their education and expertise but also by their economic circumstances. Most had achieved a level of prosperity that was modest by European standards but substantial within the Siamese context. Their salaries as government officials, supplemented by private consulting work and investments, allowed them to maintain households that included servants, automobiles, and other markers of modern middle-class status.</p>
<p>Their economic security was built on assumptions about the stability and growth of the modernizing Siamese state. They had invested in education for their children, in property in Bangkok’s expanding suburbs, in businesses that served the growing modern sector of the economy. Their prosperity depended on continued political stability and the ongoing integration of Siam into the global economy. They were, in effect, betting their futures on the success of the modernization program they were helping to implement.</p>
<p>This economic foundation created both confidence and vulnerability. Their prosperity allowed them to take intellectual risks, to experiment with new ideas, to maintain the independence of thought that made them valuable advisors to the monarchy. But it also made them dependent on the continued favor of the political system that employed them. Unlike traditional nobles, who owned land and maintained private armies, the Western-educated elite possessed only their expertise and their reputations. If the political winds shifted, they had few resources with which to protect themselves.</p>
<p>The global economic crisis that began in 1929 exposed the fragility of their position. Government salaries were reduced, private consulting opportunities disappeared, and investment values collapsed. For the first time since the beginning of the modernization program, many members of the Western-educated elite found themselves facing genuine economic hardship. Their children’s education was threatened, their standard of living declined, and their confidence in the future was shaken.</p>
</section>
<section id="cultural-leadership-and-public-service" class="level2">
<h2 class="anchored" data-anchor-id="cultural-leadership-and-public-service">Cultural Leadership and Public Service</h2>
<p>Despite their relatively small numbers—perhaps a few thousand individuals in a population of millions—the Western-educated elite exercised influence far beyond their demographic weight. They dominated the higher levels of government administration, provided leadership for cultural and educational institutions, and served as interpreters between Siam and the outside world. Their opinions carried weight not only because of their official positions but because of their demonstrated competence and their commitment to public service.</p>
<p>Their approach to cultural leadership reflected their synthesis of Eastern and Western values. They promoted traditional Thai arts while introducing Western aesthetic concepts. They supported Buddhist institutions while advocating for scientific education. They celebrated Siamese history while working to modernize Siamese society. This balanced approach had broad appeal and seemed to point toward a future in which Thailand could be both authentically itself and successfully modern.</p>
<p>Their commitment to public service distinguished them from both traditional nobles, who often viewed government positions as sources of personal enrichment, and from purely Western-trained technocrats, who might lack understanding of local conditions and values. They brought to their work a combination of technical competence and cultural sensitivity that made them exceptionally effective administrators and advisors.</p>
<p>Many supplemented their official duties with voluntary work in education, healthcare, and social welfare. They founded schools, hospitals, and charitable organizations that served broader public needs while demonstrating their commitment to social progress. Their example helped establish traditions of civic engagement and philanthropic activity that would survive the political upheavals that destroyed their own class position.</p>
</section>
<section id="the-growing-isolation" class="level2">
<h2 class="anchored" data-anchor-id="the-growing-isolation">The Growing Isolation</h2>
<p>By the early 1930s, however, the Western-educated elite were becoming increasingly isolated from broader currents in Siamese society. Their cosmopolitan outlook and gradual approach to reform put them at odds with more radical political movements that were gaining momentum among younger intellectuals and military officers. Their prosperity and privileged positions made them targets of resentment during the economic crisis. Their close association with the monarchy made them suspect to republicans and democrats who saw constitutional reform as insufficient.</p>
<p>The very qualities that had made them successful—their moderation, their international perspective, their commitment to gradual change—began to seem like weaknesses in an increasingly polarized political environment. Radical nationalists viewed their cosmopolitanism as lack of patriotism. Economic populists saw their prosperity as evidence of corruption. Military reformers regarded their civilian expertise as irrelevant to the task of national regeneration.</p>
<p>Their faith in constitutional monarchy as the solution to Siam’s political problems put them in an increasingly untenable position. They continued to believe that the monarchy could be reformed and democratized, that traditional institutions could be adapted to modern conditions, that revolutionary change was both unnecessary and dangerous. This belief would prove to be both their defining characteristic and their ultimate downfall.</p>
<p>As we shall see in <strong>?@sec-coup-aftermath</strong>, when the revolutionary moment finally arrived in June 1932, the Western-educated elite would find themselves not among the architects of change but among its victims. Their years of loyal service to the crown, their expertise in modern administration, their commitment to gradual reform—none of these would protect them from the revolutionary tide that would sweep away the world they had worked so hard to create.</p>
<p>The tragedy of their situation was that they represented the best possibilities of the old system: educated, competent, public-spirited, and committed to progress. Their destruction would deprive Thailand of much of its intellectual leadership just at the moment when such leadership was most desperately needed. In their fall, the kingdom would lose not only valuable servants but also the possibility of evolutionary change that might have avoided the traumas and instabilities that would characterize Thai politics for decades to come.</p>
<p>Among those who would pay the highest price for their loyalty to the old order was So Sethaputra, whose prison years would become both a personal catastrophe and an unlikely opportunity to create something of lasting value for Thai society. His story, which we will follow through the dark years ahead, illustrates both the tragedy of his generation and its remarkable capacity for intellectual courage under the most difficult circumstances.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>