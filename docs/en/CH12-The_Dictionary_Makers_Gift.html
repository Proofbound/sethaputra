<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ch12-the_dictionary_makers_gift – The Dictionary Maker</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-c1fac2584b48ed01fb6e278e36375074.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="fullcontent quarto-light">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="sec-dictionary-makers-gift" class="level1">
<h1>The Dictionary Maker’s Gift</h1>
<section id="a-bridge-between-cultures" class="level2">
<h2 class="anchored" data-anchor-id="a-bridge-between-cultures">A Bridge Between Cultures</h2>
<p>So Sethaputra’s dictionary became more than a reference work; it was a testament to the power of knowledge to transcend political persecution and a bridge between cultures that continues to serve students today.</p>
<p>In the end, So Sethaputra’s story transcends the particular circumstances of his imprisonment and the specific achievement of his dictionary to illuminate universal themes about human resilience, intellectual courage, and the transformative power of education. The man who entered Bang Kwang prison as Prisoner Number 26 in 1934 emerged eleven years later having created something that would outlast both his captors and the political system that had sought to destroy him. His legacy offers profound lessons about the relationship between knowledge and freedom, the role of education in preserving human dignity, and the capacity of individuals to find meaning and purpose even under the most oppressive circumstances.</p>
<p>The dictionary that So created during his imprisonment represents one of the most remarkable achievements in the history of Thai education. Born from the practical needs of his English students in Ward Six (as we saw in <strong>?@sec-prison-university</strong>), the project evolved into something far more significant: a comprehensive cultural bridge that helped generations of Thai students understand not just English words but English-speaking civilization itself. The work’s continuing influence on Thai education, decades after its publication (described in <strong>?@sec-liberation-legacy</strong>), demonstrates how intellectual achievement can indeed transcend the political conflicts that give rise to it.</p>
<p>Yet the dictionary’s significance extends beyond its practical utility to embody a particular vision of cross-cultural understanding that remains relevant in our increasingly interconnected world. So’s approach to language instruction emphasized empathy and cultural sensitivity rather than mere mechanical translation, encouraging Thai students to see English not as a foreign imposition but as a window into different ways of thinking and being.</p>
</section>
<section id="the-triumph-of-intellectual-resistance" class="level2">
<h2 class="anchored" data-anchor-id="the-triumph-of-intellectual-resistance">The Triumph of Intellectual Resistance</h2>
<p>So Sethaputra’s achievement represents one of history’s most extraordinary examples of intellectual resistance to political oppression. Unlike armed rebellion or violent resistance movements, So’s response to persecution took the form of scholarly dedication and educational innovation. His resistance was quiet, patient, and ultimately more enduring than the political forces that had imprisoned him. The dictionary he created in secret became a weapon more powerful than any sword, capable of influencing minds and shaping culture long after the regime that had persecuted him had passed into history.</p>
<p>The nature of So’s resistance offers important insights into the relationship between knowledge and power. Authoritarian governments typically seek to control education and limit access to information because they understand intuitively that knowledge represents a threat to their authority. By continuing his scholarly work despite imprisonment, So was asserting the fundamental principle that intellectual activity cannot be controlled by political force. His persistence in the face of overwhelming obstacles demonstrated that the human mind, once properly educated and committed to truth, possesses a freedom that no external authority can destroy.</p>
<p>The collaborative aspects of So’s dictionary project also illustrate the social dimensions of intellectual resistance. The work could not have been completed without the assistance of fellow prisoners who transcribed manuscripts, his mother who smuggled materials, and eventually the publisher who risked his business to bring the work to market. This network of support demonstrates how intellectual achievement, even under oppressive conditions, depends on communities of individuals who share common values and commitments.</p>
<p>The success of So’s resistance strategy vindicated his belief in the power of education to create lasting social change. While political movements rise and fall, educational innovations can influence society for generations. The students who learned English using So’s dictionary carried his pedagogical insights into their own careers as teachers, scholars, and professionals, multiplying the impact of his work far beyond what any single individual could achieve through direct political action.</p>
</section>
<section id="lessons-in-human-resilience" class="level2">
<h2 class="anchored" data-anchor-id="lessons-in-human-resilience">Lessons in Human Resilience</h2>
<p>So’s story provides profound insights into the sources of human resilience under extreme adversity. His ability to maintain his intellectual focus and emotional equilibrium during eleven years of imprisonment reveals the psychological resources that enable some individuals to transcend their circumstances rather than being crushed by them. His example offers hope to anyone facing seemingly insurmountable challenges, while also illuminating the specific strategies and attitudes that enable survival and growth under oppressive conditions.</p>
<p>The role of purposeful work in maintaining psychological health emerges as one of the most important themes of So’s experience. The dictionary project provided him with a sense of mission that transcended his immediate circumstances, giving meaning to his suffering and hope for the future. The daily routine of scholarly work created structure in an environment designed to produce chaos and despair, while the long-term nature of the project provided motivation to endure temporary hardships for the sake of eventual achievement.</p>
<p>Equally important was So’s ability to maintain social connections and collaborative relationships despite the isolating effects of imprisonment. His teaching activities in Ward Six, his partnership with fellow prisoners in dictionary production, and his ongoing relationship with his mother all provided emotional sustenance that was essential to his psychological survival. These relationships also gave him opportunities to contribute to the welfare of others, preserving his sense of dignity and social value despite his degraded legal status.</p>
<p>So’s attention to personal appearance and behavioral standards, even under the most difficult conditions, reveals another crucial dimension of resilience. By refusing to let external circumstances dictate his self-presentation, he maintained his sense of personal agency and identity. This attention to dignity was not vanity but rather a form of resistance against the dehumanizing effects of imprisonment, a declaration that his essential self could not be destroyed by external forces.</p>
</section>
<section id="the-educational-philosophy" class="level2">
<h2 class="anchored" data-anchor-id="the-educational-philosophy">The Educational Philosophy</h2>
<p>The pedagogical innovations that So developed during his imprisonment reflect a sophisticated understanding of how learning occurs across cultural boundaries. His emphasis on cultural context rather than mechanical translation anticipated by decades the communicative approaches to language instruction that would later become standard in international education. His recognition that effective language learning requires understanding of cultural assumptions and social practices demonstrated insights that remain relevant for contemporary educators working in multicultural environments.</p>
<p>So’s approach to dictionary compilation also revealed his deep appreciation for the complexity of cross-cultural communication. Rather than treating languages as simple coding systems that could be mechanically converted from one to another, he understood that effective translation requires sensitivity to the cultural contexts that give words their meaning. His example sentences were carefully chosen to illuminate not just linguistic equivalences but the social and cultural assumptions underlying different ways of expression.</p>
<p>The success of So’s educational innovations suggests that the most effective approaches to cross-cultural education are those developed by individuals who have themselves navigated multiple cultural worlds. So’s experience as a Western-educated Thai intellectual gave him unique insights into the challenges faced by Thai students encountering English language and culture. His ability to anticipate their difficulties and provide culturally appropriate solutions reflected his deep empathy for the learning process and his commitment to serving students’ actual needs rather than abstract pedagogical theories.</p>
<p>The dictionary’s enduring influence on Thai education also demonstrates the importance of indigenous scholarship in developing effective educational resources. Materials created by local educators who understand their students’ cultural backgrounds and learning styles are likely to be more effective than those imported from other cultural contexts, regardless of their quality in their original settings.</p>
</section>
<section id="global-significance" class="level2">
<h2 class="anchored" data-anchor-id="global-significance">Global Significance</h2>
<p>While So Sethaputra’s story is deeply rooted in the specific circumstances of early twentieth-century Thailand, its themes resonate with universal human experiences and concerns. The struggle between intellectual freedom and political authority that shaped his life has been repeated throughout history and across cultures, from Socrates in ancient Athens to Aleksandr Solzhenitsyn in Soviet Russia to contemporary scholars facing persecution in authoritarian regimes around the world.</p>
<p>So’s example provides inspiration and practical guidance for intellectuals facing oppression in any context. His demonstration that scholarly work can continue under the most adverse conditions offers hope to those who fear that political persecution will end their productive careers. His success in creating work of lasting value despite imprisonment shows that external circumstances, however difficult, need not determine the ultimate significance of an individual life.</p>
<p>The collaborative dimensions of So’s achievement also offer insights relevant to contemporary challenges in international education and cross-cultural communication. His success in building bridges between Thai and English-speaking cultures provides a model for educators and scholars working to promote understanding across linguistic and cultural boundaries. His emphasis on empathy and cultural sensitivity rather than cultural dominance offers an alternative to approaches that treat cross-cultural education as a form of cultural imperialism.</p>
<p>The institutional impact of So’s work on Thai education demonstrates how individual achievements can influence entire societies when they address genuine needs and reflect authentic cultural understanding. The dictionary’s integration into Thai educational curricula and its continuing influence on language instruction shows how scholarly innovation can create lasting social change through educational transformation.</p>
</section>
<section id="the-continuing-legacy" class="level2">
<h2 class="anchored" data-anchor-id="the-continuing-legacy">The Continuing Legacy</h2>
<p>More than seven decades after its publication, So Sethaputra’s dictionary continues to influence Thai education and cross-cultural understanding. While newer dictionaries and digital resources have supplemented and in some cases replaced his work, the pedagogical principles he developed and the cultural sensitivity he demonstrated remain relevant for contemporary educators and scholars. His example continues to inspire those who seek to bridge cultural divides through education and scholarship.</p>
<p>The story of So’s achievement has also taken on symbolic significance that extends beyond its practical educational impact. In Thailand, his name has become synonymous with intellectual courage and perseverance in the face of adversity. His example is frequently cited by educators and cultural leaders as evidence of the transformative power of education and the importance of preserving intellectual freedom even under oppressive political conditions.</p>
<p>Internationally, So’s story has been recognized as an important example of how individuals can resist tyranny through scholarly dedication and educational innovation. His experience offers particular insights for understanding how authoritarian governments attempt to control intellectual activity and how committed scholars can continue their work despite political persecution.</p>
<p>The broader themes illuminated by So’s story—the relationship between knowledge and freedom, the role of education in cultural preservation and development, the importance of cross-cultural understanding in an interconnected world—remain as relevant today as they were during his lifetime. His legacy challenges contemporary educators, scholars, and political leaders to consider how they can contribute to human understanding and cultural progress despite the obstacles they may face.</p>
</section>
<section id="the-enduring-gift" class="level2">
<h2 class="anchored" data-anchor-id="the-enduring-gift">The Enduring Gift</h2>
<p>In the end, So Sethaputra’s greatest gift to Thailand and to the world was not simply the dictionary he created, remarkable though that achievement was. His most enduring contribution lies in the example he provided of how intellectual dedication can transcend political persecution, how educational innovation can serve human dignity, and how individual commitment to truth and learning can create lasting benefits for society.</p>
<p>The man who began his career as a Royal Spokesman in the confident world of 1920s Siam could never have imagined that his greatest achievement would come during eleven years of imprisonment on remote islands. Yet it was precisely his response to adversity that revealed the depth of his character and the true significance of his life’s work. The dictionary maker’s gift was not merely a reference work but a demonstration of the indestructible power of the human spirit to find meaning, create beauty, and serve others even under the most impossible circumstances.</p>
<p>So Sethaputra’s story reminds us that education, at its best, is not merely the transmission of information but the cultivation of empathy, understanding, and wisdom. His dictionary served as a bridge between cultures because it was created by someone who deeply understood both sides of the cultural divide he sought to bridge. His success in creating that bridge during years of imprisonment demonstrates that the most meaningful educational achievements often emerge from the deepest forms of human struggle and compassion.</p>
<p>The dictionary maker’s gift continues to give, inspiring new generations of educators and scholars to pursue their own bridges between cultures, their own forms of intellectual resistance to oppression, their own commitments to serving human understanding and dignity through education and scholarship. In this way, So Sethaputra’s legacy transcends the particular circumstances of his life to become part of the eternal human quest for knowledge, freedom, and mutual understanding across the boundaries that divide us.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>